"use strict";var Photo=Backbone.Model.extend({idAttribute:"_id",defaults:{caption:"You are a 90s kid",url:"http://placehold.it/300x300"}}),PhotoCollection=Backbone.Collection.extend({model:Photo,url:"http://tiny-pizza-server.herokuapp.com/collections/photos-lance"}),ThumbnailView=Backbone.View.extend({className:"thumbnail",template:_.template($(".thumbnail-images").text()),events:{click:"showDetailView"},initialize:function(){$(".thumbnail-container").append(this.el),this.render()},render:function(){var a=this.template(this.model.attributes);this.$el.html(a)},showDetailView:function(){detailPhoto.remove(),detailPhoto=new DetailView({model:this.model})}}),DetailView=Backbone.View.extend({className:"detail-box",detailTemplate:_.template($(".detail-images").text()),events:{"click .new-image":"saveImage","click .new-caption":"addCaption","click .new-product":"addProduct"},initialize:function(){this.listenTo(showPhotos,"add",function(a){new ThumbnailView({model:a})}),this.listenTo(this.model,"change",this.render),$(".main-container").append(this.el),this.render()},render:function(){var a=this.detailTemplate(this.model.attributes);return this.$el.html(a),this},addCaption:function(){this.model.set({caption:this.$el.find(".caption-input").val()}),showPhotos.add(this.model),this.model.save().done(function(){this.$el.find(".status").html("Saved!")})},saveImage:function(){var a=this;this.model.set({url:this.$el.find(".image-input").val(),caption:this.$el.find(".caption-input").val()}),showPhotos.add(this.model),this.model.save().done(function(){a.$el.find(".status").html("Saved!")})},addProduct:function(){var a=new Photo;new DetailView({model:a})}}),AppRouter=Backbone.Router.extend({routes:{"":"renderHome",favorites:"renderUserFavorites"},initialize:function(){console.log("AppRouter was just created!")},renderHome:function(){var a=showPhotos.get(id);console.log(showPhotos.length," is the number of photos in the collection");new DetailView({model:a})},renderUserFavorites:function(){$(".top-container").html("Here are my favorites!")}}),showPhotos=new PhotoCollection,detailPhoto;showPhotos.fetch().done(function(){Backbone.history.start(),showPhotos.each(function(a){new ThumbnailView({model:a})}),detailPhoto=new DetailView({model:showPhotos.first()})});